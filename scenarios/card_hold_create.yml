require:
  - customer_add_card.yml
scenarios:
  - name: create_hold
    request:
      method: POST
      href: "{card_create,cards.holds}"
      schema:
        "$ref": "../requests/cards/hold.json"
      body:
        amount: 5000
    response:
      status_code: 201
      schema:
        "$ref": "../responses/card_holds.json"
  - name: caputre_hold
    request:
      method: POST
      href: "/card_holds/{create_hold,card_holds.id}/debits"
    response:
      schema:
        "$ref": "../responses/debits.json"
      matches: { "debits": [ { "links": { "customer": "{customer_create,customers.id}", "source": "{card_create,cards.id}" }, "amount": 5000 } ] }
